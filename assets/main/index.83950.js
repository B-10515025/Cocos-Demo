window.__require=function t(e,o,s){function i(n,h){if(!o[n]){if(!e[n]){var c=n.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!h&&p)return p(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+n+"'")}n=c}var a=o[n]={exports:{}};e[n][0].call(a.exports,function(t){return i(e[n][1][t]||t)},a,a.exports,t,e,o,s)}return o[n].exports}for(var r="function"==typeof __require&&__require,n=0;n<s.length;n++)i(s[n]);return i}({Enemy:[function(t,e,o){"use strict";cc._RF.push(e,"3f6d7b6DANCo5+xvE40b2KJ","Enemy");var s,i=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,s){var i,r=arguments.length,n=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,s);else for(var h=t.length-1;h>=0;h--)(i=t[h])&&(n=(r<3?i(n):r>3?i(e,o,n):i(e,o))||n);return r>3&&n&&Object.defineProperty(e,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,h=n.ccclass,c=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frames=[],e.resetX=800,e.destroyX=-800,e.speedX=0,e}return i(e,t),e.prototype.start=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.frames[this.type],this.moveAction()},e.prototype.update=function(){this.collision()},e.prototype.moveAction=function(){0==this.type?(this.node.x=this.resetX,this.node.y=0,this.node.anchorY=0,this.speedX=300*this.game.getComponent("Game").speed,this.game.getComponent("Game").score>900&&(this.node.scaleX=1+.5*Math.random(),this.node.scaleY=1+Math.random()),cc.tween(this.node).then(cc.sequence(cc.moveTo((this.resetX-this.destroyX)/this.speedX,this.destroyX,0),cc.destroySelf())).start()):(this.node.x=this.resetX,this.node.y=100+200*Math.random(),this.speedX=(150+50*Math.random())*this.game.getComponent("Game").speed,cc.tween(this.node).then(cc.sequence(cc.moveTo((this.resetX-this.destroyX)/this.speedX,this.destroyX,100+200*Math.random()),cc.destroySelf())).start())},e.prototype.collision=function(){0==this.type?Math.abs(this.hero.y-this.node.y)<this.node.height&&Math.abs(this.hero.x-this.node.x)<.5*this.hero.width+.5*this.node.width*(1-Math.abs(this.hero.y-this.node.y)/this.node.height)&&this.game.getComponent("Game").over():Math.abs(this.hero.x-this.node.x)<.5*(this.hero.width+this.node.width)&&Math.abs(this.hero.y-this.node.y)<.5*(this.hero.height+this.node.height)&&this.game.getComponent("Game").over()},r([c([cc.SpriteFrame])],e.prototype,"frames",void 0),r([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"2d92cRdwYxB2pli2unzPuKa","Game");var s,i=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,s){var i,r=arguments.length,n=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,s);else for(var h=t.length-1;h>=0;h--)(i=t[h])&&(n=(r<3?i(n):r>3?i(e,o,n):i(e,o))||n);return r>3&&n&&Object.defineProperty(e,o,n),n};function n(t,e){return t.length>=e?t:n("0"+t,e)}Object.defineProperty(o,"__esModule",{value:!0});var h=cc._decorator,c=h.ccclass,p=h.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score=0,e.highScore=0,e.speed=1,e.prob1=.008,e.prob2=0,e}return i(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.start=function(){this.highScore=0,this.hiLabel.string="HI    "+n(0,5),this.reset()},e.prototype.update=function(t){this.gameOver.active||(this.score+=10*t,this.scoreLabel.string=n(Math.floor(this.score),5)),this.speed=(this.score-100)/400,this.speed<1&&(this.speed=1),this.speed>2&&(this.speed=2),this.score>500&&(this.prob1+=6e-5*t),this.score>450&&(this.prob2+=1e-4*t),this.prob1>.05&&(this.prob1=.05),this.prob2>.1&&(this.prob2=.1),Math.random()<this.prob1&&this.generate(0),Math.random()<this.prob2&&this.generate(1)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.r:this.gameOver.active&&this.reset()}},e.prototype.reset=function(){this.score>this.highScore&&(this.highScore=this.score,this.hiLabel.string="HI    "+n(Math.floor(this.highScore),5)),this.score=0,this.prob1=.008,this.prob2=0;for(var t=0;t<this.floor.childrenCount;t++)"Hero"!=this.floor.children[t].name&&this.floor.children[t].destroy();this.hero.active=!0,this.hero.getComponent("Hero").reset(),this.gameOver.active=!1},e.prototype.over=function(){this.hero.active=!1,this.gameOver.active=!0},e.prototype.generate=function(t){var e=cc.instantiate(this.enemy);e.parent=this.floor;var o=e.getComponent("Enemy");o.game=this.node,o.hero=this.hero,o.type=t},r([p(cc.Label)],e.prototype,"hiLabel",void 0),r([p(cc.Label)],e.prototype,"scoreLabel",void 0),r([p(cc.Node)],e.prototype,"hero",void 0),r([p(cc.Prefab)],e.prototype,"enemy",void 0),r([p(cc.Node)],e.prototype,"floor",void 0),r([p(cc.Node)],e.prototype,"gameOver",void 0),r([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Hero:[function(t,e,o){"use strict";cc._RF.push(e,"bf913mcrBdJbYprNqXUSYa1","Hero");var s,i=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,s){var i,r=arguments.length,n=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,s);else for(var h=t.length-1;h>=0;h--)(i=t[h])&&(n=(r<3?i(n):r>3?i(e,o,n):i(e,o))||n);return r>3&&n&&Object.defineProperty(e,o,n),n};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,h=n.ccclass,c=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frames=[],e.moveSpeed=300,e.dashSpeed=700,e.jumpSpeed=900,e.gravity=3500,e.leftBorder=-650,e.rightBorder=650,e.floorBorder=0,e.maxJump=2,e.dashTime=.125,e.dashCD=.5,e.resetX=-400,e.resetY=0,e.speedX=0,e.speedY=0,e.speedD=0,e.dashing=0,e.coolDown=0,e.jumpCount=2,e.LF_up=!0,e.RT_up=!0,e.DN_up=!0,e.UP_up=!0,e.SP_up=!0,e}return i(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.start=function(){this.anim_walk=this.node.getComponent(cc.Animation).play("walk"),this.anim_idle=this.node.getComponent(cc.Animation).play("idle"),this.reset()},e.prototype.update=function(t){this.coolDown-=t,this.dashing-=t,this.node.x+=this.speedX*t,this.dashing>0?this.node.x+=this.speedD*t:(this.node.y+=this.speedY*t,this.speedY-=this.gravity*t,this.speedD=0),this.node.x<this.leftBorder&&(this.node.x=this.leftBorder),this.node.x>this.rightBorder&&(this.node.x=this.rightBorder),this.node.y<=this.floorBorder&&(this.node.y=this.floorBorder,this.speedY=0,this.jumpCount=this.maxJump),0!=this.speedD?(this.anim_idle.stop(),this.anim_walk.stop(),this.getComponent(cc.Sprite).spriteFrame=this.frames[2]):this.speedY>0?(this.anim_idle.stop(),this.anim_walk.stop(),this.getComponent(cc.Sprite).spriteFrame=this.frames[0]):this.speedY<0?(this.anim_idle.stop(),this.anim_walk.stop(),this.getComponent(cc.Sprite).spriteFrame=this.frames[1]):0==this.speedX?(this.anim_walk.stop(),this.anim_idle.isPlaying||(this.anim_idle=this.node.getComponent(cc.Animation).play("idle"))):(this.anim_idle.stop(),this.anim_walk.isPlaying||(this.anim_walk=this.node.getComponent(cc.Animation).play("walk")))},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.left:this.LF_up&&(this.LF_up=!1,this.speedX=-this.moveSpeed,this.node.scaleX=-1);break;case cc.macro.KEY.right:this.RT_up&&(this.RT_up=!1,this.speedX=this.moveSpeed,this.node.scaleX=1);break;case cc.macro.KEY.up:this.UP_up&&this.jumpCount>0&&(this.UP_up=!1,this.jumpCount--,this.speedY=this.jumpSpeed);break;case cc.macro.KEY.down:this.DN_up&&(this.DN_up=!1,this.speedY=-this.dashSpeed);break;case cc.macro.KEY.space:this.SP_up&&(this.SP_up=!1,this.coolDown<=0&&(this.coolDown=this.dashCD,this.speedD=this.dashSpeed*this.node.scaleX,this.dashing=this.dashTime))}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.left:this.LF_up=!0,this.speedX<0&&(this.speedX=0);break;case cc.macro.KEY.right:this.RT_up=!0,this.speedX>0&&(this.speedX=0);break;case cc.macro.KEY.up:this.UP_up=!0;break;case cc.macro.KEY.down:this.DN_up=!0;break;case cc.macro.KEY.space:this.SP_up=!0}},e.prototype.reset=function(){this.node.x=this.resetX,this.node.y=this.resetY,this.speedX=0,this.speedY=0,this.speedD=0,this.dashing=0,this.coolDown=0,this.jumpCount=2,this.LF_up=!0,this.RT_up=!0,this.DN_up=!0,this.UP_up=!0,this.SP_up=!0},r([c([cc.SpriteFrame])],e.prototype,"frames",void 0),r([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{}]},{},["Enemy","Game","Hero"]);